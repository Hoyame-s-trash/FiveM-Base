import{j as e,F as B,r as a,a as s}from"./jsx-runtime-bb820e81.js";import{u as ee,b as te,H as z,T as q,f as I,au as we,C as H,L as r,Z as ae,r as ke,aw as Ee,bs as fe,Y as K,az as Te,bt as ne,S as se,b3 as Le,o as Y,N as he,a6 as ge,h as Q,q as ve,Q as Ne,B as Me,K as ce,$ as de,a0 as me,U as le,ar as Re,a8 as Se,aa as Pe,aH as Oe,bu as ye,bq as Ge,m as Ve}from"./Phone-a7ab6193.js";import{C as _e}from"./Check-44f46e76.js";import{a as be}from"./DotSpinner-213d2cc9.js";function Ae(i){const N=ee(te.Settings);return e(B,{children:i.liked?e("svg",{onClick:i.onClick,color:"#ed4956",fill:"#ed4956",height:"24",viewBox:"0 0 48 48",width:"24",children:e("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}):e("svg",{onClick:i.onClick,color:N.display.theme==="dark"?"#ffffff":"#262626",fill:N.display.theme==="dark"?"#ffffff":"#262626",height:"24",viewBox:"0 0 24 24",width:"24",children:e("path",{d:"M16.792 3.904A4.989 4.989 0 0121.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 014.708-5.218 4.21 4.21 0 013.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 013.679-1.938m0-2a6.04 6.04 0 00-4.797 2.127 6.052 6.052 0 00-4.787-2.127A6.985 6.985 0 00.5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 003.518 3.018 2 2 0 002.174 0 45.263 45.263 0 003.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 00-6.708-7.218z"})})})}function pe(i){const{Account:N,View:L,Func:c,UserPanel:l}=a.useContext($),o=ee(te.Settings),[h]=N,[T,E]=L,[m,S]=l,[t,d]=a.useState(i.data),w=a.useRef(null);a.useRef(null);const[M,C]=a.useState(0),[g,R]=a.useState(!1),v={onMouseDown:f=>{v.pos={startLeft:w.current.scrollLeft,startX:f.clientX},w.current.style.userSelect="none",document.addEventListener("mouseup",v.onMouseUp),document.addEventListener("mousemove",v.onMove)},onMove:f=>{const y=(f.clientX-v.pos.startX)/Ee(o.display.size);w.current.scrollLeft=v.pos.startLeft-y;const P=w.current.getBoundingClientRect();(P.left-5>f.clientX||f.clientX>P.right-5)&&v.onMouseUp()},onMouseUp:f=>{w.current.style.removeProperty("user-select"),document.removeEventListener("mouseup",v.onMouseUp),document.removeEventListener("mousemove",v.onMove);const y=JSON.parse(t.media),P=w.current.clientWidth;let k=M;const A=w.current.scrollLeft-v.pos.startLeft;A>P/2&&k<y.length-1?k++:A<-P/2&&k>0&&k--,V(k)}},V=f=>{w.current.scrollTo({left:f*w.current.offsetWidth,behavior:"smooth"}),C(f)};z("instagram:setLikes",f=>{f.postId!==t.id||f.isComment||d({...t,like_count:f.likes})});const F=f=>{if(f.detail===2){if(!t.id)return;t.liked||I("Instagram",{action:"toggleLike",data:{postId:t.id,toggle:!t.liked,isComment:!1}}).then(y=>{d({...t,liked:y.liked,like_count:y.likes})}),R(!0),setTimeout(()=>{R(!1)},1e3)}};return s("div",{className:"post",id:i.last?"last":"",children:[s("div",{className:"post-header",children:[e("img",{className:"profile-picture",onClick:()=>{c.fetchAndSetProfile(t.username)},src:c.getAvatar(t.avatar)}),s("div",{className:"name",onClick:()=>c.fetchAndSetProfile(t.username),children:[t.username,t.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]})]}),s("div",{className:"post-body",children:[g&&e("div",{className:`popup-heart ${g?"show":"hide"}`,children:e("svg",{color:"#e3e3e3",fill:"#e3e3e3",height:"24",viewBox:"0 0 48 48",width:"24",children:e("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})})}),e("div",{className:"image-container",ref:w,onMouseDown:v.onMouseDown,children:JSON.parse(t.media).map((f,y)=>e("div",{className:"image",onClick:F,children:q(f)?e("video",{src:f,autoPlay:!0,loop:!0,muted:!0}):e("img",{src:f})},y))}),s("div",{className:"actions",children:[s("div",{className:"like-comment",children:[e(Ae,{liked:t.liked,onClick:()=>{t.id&&I("Instagram",{action:"toggleLike",data:{postId:t.id,toggle:!t.liked,isComment:!1}}).then(f=>{d({...t,liked:f.liked,like_count:f.likes})})}}),e("svg",{onClick:()=>c.fetchAndSetComments(t),color:"#262626",fill:"#262626",height:"24",viewBox:"0 0 24 24",width:"24",children:e("path",{d:"M20.656 17.008a9.993 9.993 0 10-3.59 3.615L22 22z",fill:"none",stroke:"currentColor",strokeWidth:"2px"})}),(t.username===h.username||h.isAdmin)&&e(we,{onClick:()=>{H.PopUp.set({title:r("APPS.INSTAGRAM.DELETE_POST_POPUP.TITLE"),description:r("APPS.INSTAGRAM.DELETE_POST_POPUP.DESCRIPTION"),buttons:[{title:r("APPS.INSTAGRAM.DELETE_POST_POPUP.CANCEL")},{title:r("APPS.INSTAGRAM.DELETE_POST_POPUP.PROCEED"),color:"red",cb:()=>{I("Instagram",{action:"deletePost",id:t.id}).then(f=>{f&&E("feed")})}}]})}})]}),JSON.parse(t.media).length>1&&e("div",{className:"scroll-dots",children:JSON.parse(t.media).map((f,y)=>e("div",{className:`dot ${M==y?"active":""}`,onClick:()=>V(y)},y))})]}),s("div",{className:"liked-by",onClick:()=>{S({display:!0,data:{title:r("APPS.INSTAGRAM.LIKED_BY"),postId:t.id,cb:()=>{E("feed")}}})},children:[t.like_count," ",r("APPS.INSTAGRAM.LIKES")]}),s("div",{className:"caption",children:[e("span",{className:"user",onClick:f=>{f.stopPropagation(),c.fetchAndSetProfile(t.username)},children:t.username}),ae(t.caption)," "]}),e("div",{className:"comments",onClick:f=>{f.stopPropagation(),c.fetchAndSetComments(t)},children:t.comment_count>0?r("APPS.INSTAGRAM.VIEW_ALL_COMMENTS").format({count:t.comment_count}):r("APPS.INSTAGRAM.FIRST_COMMENT")}),e("div",{className:"date",children:ke(t.timestamp)})]})]})}function Fe(i){const{Account:N,View:L,Post:c,Func:l,Stories:o}=a.useContext($),[h,T]=L,[E]=N,[m,S]=a.useState([]),[t,d]=a.useState([]),[w,M]=o,[C,g]=a.useState(0),[R,v]=a.useState(!1),[V,F]=a.useState(!1);a.useEffect(()=>{I("Instagram",{action:"getPosts",filters:{following:!0},page:0}).then(P=>{P&&S(P)})},[]),a.useEffect(()=>{h==="feed"&&(I("Instagram",{action:"getLives"}).then(P=>{P&&d(P)}),I("Instagram",{action:"getStories"}).then(P=>{P&&M([...P.sort((k,A)=>{if(k.seen===A.seen)return 0;if(k.seen===1)return 1;if(A.seen===1)return-1})])}))},[h]);const f=P=>{if(R||V)return;let k=document.querySelector("#last");if(!k)return;!K(k)&&(F(!0),I("Instagram",{action:"getPosts",filters:{following:!0},page:C+1}).then(n=>{n&&n.length>0?(S([...m,...n]),F(!1)):v(!0)}),g(n=>n+1))};a.useEffect(()=>{const P=document.querySelector(".stories");P.addEventListener("wheel",k=>{k.preventDefault(),P.scrollLeft+=k.deltaY})},[]),z("instagram:updateLives",P=>{P&&d(P)});const y=()=>{H.PopUp.set({title:r("APPS.INSTAGRAM.GO_LIVE_POPUP.TITLE"),description:r("APPS.INSTAGRAM.GO_LIVE_POPUP.DESCRIPTION"),buttons:[{title:r("APPS.INSTAGRAM.GO_LIVE_POPUP.CANCEL")},{title:r("APPS.INSTAGRAM.GO_LIVE_POPUP.PROCEED"),color:"red",cb:()=>{I("Instagram",{action:"goLive",user:{username:E.username,avatar:l.getAvatar(E==null?void 0:E.avatar),verified:E.verified}}),T("live")}}]})};return s(B,{children:[s("div",{className:"instagram-header feed-header",children:[s("div",{className:"name",children:[E.username,E.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),s("svg",{onClick:()=>T("dmList"),color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:[e("line",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",x1:"22",x2:"9.218",y1:"3",y2:"10.083"}),e("polygon",{fill:"none",points:"11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})]})]}),s("div",{className:"feed",onScroll:f,children:[e("div",{className:"stories-wrapper",children:s("div",{className:"stories",children:[s("div",{className:"story self",onClick:()=>{H.ContextMenu.set({buttons:[{title:r("APPS.INSTAGRAM.GO_LIVE"),cb:()=>{y()}},{title:r("APPS.INSTAGRAM.CREATE_STORY"),cb:()=>{H.Gallery.set({includeVideos:!0,onSelect:P=>{I("Instagram",{action:"addToStory",media:P.src}).then(k=>{k&&M(A=>[{username:E.username,avatar:E.avatar,verified:E.verified,seen:!1,id:k},...A.filter(n=>n.username!==E.username)])})}})}}]})},children:[e("div",{className:"profile-picture",style:{backgroundImage:`url(${l.getAvatar(E==null?void 0:E.avatar)})`},children:e("div",{className:"plus",children:e("i",{className:"far fa-plus"})})}),e("div",{className:"name",children:r("APPS.INSTAGRAM.YOUR_STORY")})]}),Object.keys(t).map((P,k)=>{var A;return s("div",{className:"story",onClick:()=>{I("Instagram",{action:"viewLive",username:P}),T("live")},children:[e("div",{className:"profile-picture",style:{backgroundImage:`url(${l.getAvatar((A=t[P])==null?void 0:A.avatar)})`},children:e("img",{className:"circle live",src:"./assets/img/icons/instagram/LiveCircle.png"})}),e("div",{className:"name",children:P})]},k)}),w.map((P,k)=>s("div",{className:"story",onClick:A=>{let[n,p]=fe(A);l.fetchAndSetStory(P,null,{x:n,y:p})},children:[e("div",{className:"profile-picture",style:{backgroundImage:`url(${l.getAvatar(P==null?void 0:P.avatar)})`},children:e("img",{className:"circle","data-seen":P.seen===1,src:"./assets/img/icons/instagram/StoryCircle.png"})}),e("div",{className:"name",children:P.username})]},k))]})}),m.length===0&&e("div",{className:"no-posts",children:r("APPS.INSTAGRAM.EMPTY_FEED")}),m.map((P,k)=>{let A=k===m.length-1;return e(pe,{data:P,last:A},k)})]})]})}function De(){const{View:i,Account:N,Func:L}=a.useContext($),[c,l]=i,[o]=N,h=ee(he),[T,E]=a.useState(""),[m,S]=a.useState(!1),t=a.useRef(null),[d,w]=a.useState({user:{username:"",avatar:"",verified:!1},viewers:0}),M=a.useRef(null),C=a.useRef(null),g=a.useRef(null),[R,v]=a.useState([]),[V,F]=a.useState([]),[f,y]=a.useState(null);a.useEffect(()=>{C.current.scrollTop=C.current.scrollHeight},[V]),a.useEffect(()=>{if(!f||g.current)return;let n=new Te(f);g.current=n,n.resizeByAspect(3/4);const p=window.innerWidth;p>1280&&n.setQuality(1280/p)},[f]),a.useEffect(()=>()=>{g.current&&g.current.destroy()},[]),a.useEffect(()=>{const n=d;if(!(n!=null&&n.id)||!M.current||m)return;const p=h.ice?new ne({iceTransportPolicy:"relay",config:{iceServers:h.ice}}):new ne;p.on("open",()=>{const G=document.createElement("canvas");G.width=5,G.height=5;const u=G.captureStream(0),b=p.call(n.id,u);v([...R,b]),b.on("close",()=>{G.remove()}),b.on("error",()=>{G.remove()}),b.on("stream",O=>{const D=M.current;D.onloadeddata=()=>{D.play()},D.srcObject=O,I("Instagram",{action:"addCall",id:b.connectionId,username:o.username})})})},[M.current,d.user]),a.useEffect(()=>{if(S(o.username===(d==null?void 0:d.user.username)),(d==null?void 0:d.user.username)!==o.username||!f)return;const n=h.ice?new ne({iceTransportPolicy:"relay",config:{iceServers:h.ice}}):new ne;n.on("open",G=>{I("Instagram",{action:"setLive",username:o.username,verified:o.verified,id:G})});const p=f.captureStream(24);n.on("call",G=>{G.answer(p),G.on("close",()=>{v(R.filter(u=>u.connectionId!==G.connectionId))}),v([...R,G])})},[d,f]);const P=()=>{H.PopUp.set({title:r("APPS.INSTAGRAM.END_LIVE_POPUP.TITLE"),description:r("APPS.INSTAGRAM.END_LIVE_POPUP.DESCRIPTION").format({action:(m?r("APPS.INSTAGRAM.END_LIVE_POPUP.END"):r("APPS.INSTAGRAM.END_LIVE_POPUP.LEAVE")).toLowerCase()}),buttons:[{title:r("APPS.INSTAGRAM.END_LIVE_POPUP.CANCEL")},{title:m?r("APPS.INSTAGRAM.END_LIVE_POPUP.END"):r("APPS.INSTAGRAM.END_LIVE_POPUP.LEAVE"),color:"red",cb:()=>{se.ShouldClose.set(!0),A(!0)}}]})},k=()=>{I("Instagram",{action:"sendLiveMessage",data:{user:{username:o.username,avatar:o.avatar,verified:o.verified},live:d.user.username,content:T}}),E("")},A=n=>{m?I("Instagram",{action:"endLive",username:o.username}).then(()=>{l("feed")}):(I("Instagram",{action:"stopViewing",username:d.user.username}),n?(se.ShouldClose.set(!0),w({...d,ended:!0})):l("feed")),R.forEach(p=>{p.close()}),v([])};return z("instagram:addMessage",n=>{n.live===d.user.username&&F([...V,n])}),z("instagram:updateViewers",n=>{n.username===(d==null?void 0:d.user.username)&&w({...d,viewers:n.viewers})}),z("instagram:setLive",n=>{w(n),se.ShouldClose.set(!1)}),z("instagram:liveEnded",n=>{n===(d==null?void 0:d.user.username)&&A(!0)}),z("instagram:stopLive",()=>{l("feed")}),z("instagram:endCall",n=>{R.forEach(p=>{p.connectionId===n&&p.close()}),v(R.filter(p=>p.connectionId!==n))}),s(B,{children:[e("div",{className:"instagram-stream",children:m?e("canvas",{ref:n=>y(n)}):e("video",{ref:M})}),d.ended&&s("div",{className:"instagram-stream-ended",children:[e(Le,{onClick:()=>l("feed")}),e("div",{className:"title",children:r("APPS.INSTAGRAM.LIVE_ENDED")})]}),s("div",{className:"instagram-live",children:[s("div",{className:"live-header",children:[s("div",{className:"profile",onClick:()=>{m||(A(),L.fetchAndSetProfile(d.user.username))},children:[e("div",{className:"profile-picture",style:{backgroundImage:`url(${d.user.avatar?d.user.avatar:"./assets/img/icons/instagram/unknown-pfp.jpg"})`}}),s("div",{className:"name",children:[d.user.username.length>12?d.user.username.substring(0,12)+"...":d.user.username,d.user.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]})]}),s("div",{className:"stats",children:[e("div",{className:"live",children:r("APPS.INSTAGRAM.LIVE")}),s("div",{className:"viewers",children:[e("i",{className:"fas fa-eye"}),d.viewers]}),e("i",{className:"far fa-times x",onClick:()=>{m?P():A(!1)}})]})]}),s("div",{className:"comment-section",children:[e("div",{className:"comment-feed",ref:C,children:V.map((n,p)=>{let G=n.user.avatar??"./assets/img/icons/instagram/unknown-pfp.jpg";return s("div",{className:"comment",children:[e("img",{src:G}),s("div",{className:"info",children:[s("div",{className:"name",children:[n.user.username,n.user.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),e("div",{className:"comment-text",children:n.content})]})]},p)})}),s("div",{className:"comment-input",children:[e(Y,{type:"text",ref:t,placeholder:r("APPS.INSTAGRAM.COMMENT_PLACEHOLDER"),onChange:n=>E(n.target.value),onKeyDown:n=>{n.key==="Enter"&&T.replace(/ /g,"").length>0&&(k(),t.current.value="")}}),e("i",{className:"far fa-paper-plane",onClick:()=>{T.replace(/ /g,"").length>0&&(k(),t.current.value="")}}),m&&e("i",{className:"fas fa-repeat",onClick:()=>{I("Instagram",{action:"flipCamera"})}})]})]})]})]})}function Ue(){const{View:i,Profile:N,Account:L,Func:c,GoBack:l,Post:o,UserPanel:h,LoggedIn:T,Dm:E}=a.useContext($),[m,S]=i,[t,d]=N,[w,M]=T,[C,g]=L,[R,v]=o,[V,F]=E,[f,y]=h,[P,k]=l,[A,n]=a.useState(!1),[p,G]=a.useState(!1),[u,b]=a.useState(null),[O,D]=a.useState(0),[W,_]=a.useState(!1),[U,j]=a.useState(!1);a.useEffect(()=>{t.username&&(n(C.username===t.username),I("Instagram",{action:"getPosts",filters:{profile:!0,username:t.username},page:0}).then(x=>{x&&b(x)}))},[t]);const J=()=>{if(W||U)return;let x=document.querySelector("#last");if(!x)return;!K(x)&&(j(!0),I("Instagram",{action:"getPosts",filters:{profile:!0,username:t.username},page:O+1}).then(X=>{X&&X.length>0?(b([...u,...X]),j(!1)):_(!0)}),D(X=>X+1))},Ce=x=>{t.name&&I("Instagram",{action:"updateProfile",data:{name:t.name,bio:t.bio,avatar:t.avatar}}).then(Z=>{Z&&G(!1)})};z("instagram:setFollowers",x=>{x.username===t.username&&d({...t,followers:x.followers})}),z("instagram:setFollowing",x=>{x.username===t.username&&d({...t,following:x.following})});const oe=a.useRef(!0);return a.useEffect(()=>{if(oe.current){oe.current=!1;return}I("Instagram",{action:"toggleFollow",data:{username:t.username,following:t.isFollowing}})},[t.isFollowing]),e(B,{children:t&&e("div",{className:"profile",children:p?s("div",{className:"slide up",children:[s("div",{className:"edit-profile-header",children:[e("div",{className:"cancel",onClick:()=>G(!1),children:r("CANCEL")}),e("div",{className:"title",children:r("APPS.INSTAGRAM.EDIT_PROFILE")}),e("div",{className:"save",onClick:()=>Ce(),children:r("APPS.INSTAGRAM.DONE")})]}),s("div",{className:"edit-profile-body",children:[s("div",{className:"profile-picture",onClick:()=>{H.Gallery.set({onSelect:x=>{d({...t,avatar:x.src}),g({...C,avatar:x.src})}})},children:[e("img",{src:c.getAvatar(t.avatar),alt:"profile"}),e("span",{children:r("APPS.INSTAGRAM.CHANGE_PICTURE")})]}),s("div",{className:"profile-items",children:[s("div",{className:"item",children:[e("div",{className:"title",children:r("APPS.INSTAGRAM.NAME")}),e(Y,{placeholder:r("APPS.INSTAGRAM.NAME_PLACEHOLDER"),onChange:x=>{d({...t,name:x.target.value})},maxLength:30,defaultValue:t.name})]}),s("div",{className:"item",children:[e("div",{className:"title",children:r("APPS.INSTAGRAM.BIO")}),e(ge,{placeholder:r("APPS.INSTAGRAM.BIO"),onChange:x=>{d({...t,bio:x.target.value})},maxLength:100,defaultValue:t.bio??""})]})]}),e("div",{className:"sign-out",onClick:()=>{H.PopUp.set({title:r("APPS.INSTAGRAM.SIGN_OUT_POPUP.TITLE"),description:r("APPS.INSTAGRAM.SIGN_OUT_POPUP.DESCRIPTION"),buttons:[{title:r("APPS.INSTAGRAM.SIGN_OUT_POPUP.CANCEL")},{title:r("APPS.INSTAGRAM.SIGN_OUT_POPUP.PROCEED"),color:"red",cb:()=>{I("Instagram",{action:"signOut"}).then(x=>{M(null),g(null),Q.APPS.INSTAGRAM.account.set(!1)})}}]})},children:"Sign Out"})]})]}):s(B,{children:[A?s("div",{className:"instagram-header",children:[e("div",{className:"name",children:t.username??"Unknown"}),t.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}):s("div",{className:"profile-header",children:[e("i",{className:"fas fa-chevron-left",onClick:()=>{P!=null&&P.cb?P.cb():S("feed")}}),s("div",{className:"name",children:[t.username??"Unknown",t.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),e("span",{})]}),s("div",{className:"profile-body",children:[s("div",{className:"profile-wrapper",children:[s("div",{className:"top",children:[s("div",{className:"profile-picture",style:{backgroundImage:`url(${c.getAvatar(t.avatar)})`},children:[t.isLive&&e("img",{onClick:()=>{I("Instagram",{action:"viewLive",username:t.username}),S("live")},className:"circle live",src:"./assets/img/icons/instagram/LiveCircle.png"}),t.hasStory&&!t.isLive?e("img",{className:"circle","data-seen":t.seenStory===1,src:"./assets/img/icons/instagram/StoryCircle.png",onClick:x=>{let[Z,X]=fe(x);c.fetchAndSetStory({username:t.username,avatar:t.avatar,verified:t.verified},null,{x:Z,y:X})}}):null]}),s("div",{className:"stats",children:[s("div",{children:[e("div",{className:"value",children:t.posts}),e("div",{className:"label",children:t.posts===1?r("APPS.INSTAGRAM.POST"):r("APPS.INSTAGRAM.POSTS")})]}),s("div",{onClick:()=>{y({display:!0,data:{title:"Followers",username:t.username,cb:()=>{d(t),S("profile"),y({display:!1})}}})},children:[e("div",{className:"value",children:t.followers}),e("div",{className:"label",children:t.followers===1?r("APPS.INSTAGRAM.FOLLOWER"):r("APPS.INSTAGRAM.FOLLOWERS")})]}),s("div",{onClick:()=>{y({display:!0,data:{title:r("APPS.INSTAGRAM.FOLLOWING"),username:t.username,cb:()=>{d(t),S("profile"),y({display:!1})}}})},children:[e("div",{className:"value",children:t.following}),e("div",{className:"label",children:r("APPS.INSTAGRAM.FOLLOWING")})]})]})]}),e("div",{className:"name",children:t.name}),e("div",{className:"description",children:ae(t.bio)??""}),e("div",{className:"buttons",children:A?A&&e("div",{className:"button edit",onClick:()=>{G(!0)},children:r("APPS.INSTAGRAM.EDIT_PROFILE")}):s(B,{children:[t.isFollowing?e("div",{className:"button following",onClick:()=>{H.PopUp.set({title:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.TITLE"),description:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.DESCRIPTION").format({name:t.username}),buttons:[{title:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.CANCEL")},{title:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.PROCEED"),color:"red",cb:()=>{d({...t,isFollowing:!1})}}]})},children:r("APPS.INSTAGRAM.FOLLOWING")}):e("div",{className:"button follow",onClick:()=>{d({...t,isFollowing:!0})},children:r("APPS.INSTAGRAM.FOLLOW")}),e("div",{className:"button following",onClick:()=>{F({username:t.username,name:t.name,verified:t.verified,avatar:t.avatar}),S("dm")},children:r("APPS.INSTAGRAM.MESSAGE")})]})})]}),e("div",{className:"posts",onScroll:J,children:u&&u.map((x,Z)=>{let X=Z===u.length-1?"last":"",re=JSON.parse(x.media)[0];return e("div",{id:X,onClick:()=>{k({cb:()=>{d(t),S("profile"),v(null),k(null)}}),v(x),S("post")},children:q(re)?e("video",{src:re,muted:!0,autoPlay:!0,loop:!0}):e("img",{src:re})},Z)})})]})]})})})}function ue(){const{View:i,Account:N,LoggedIn:L}=a.useContext($),c=ee(te.Settings),[l,o]=a.useState(""),[h,T]=a.useState(""),[E,m]=a.useState(""),[S,t]=a.useState(!1),[d,w]=a.useState(!1),[M,C]=a.useState(!1),[g,R]=i,[v,V]=N,[F,f]=L,[y,P]=a.useState("login"),k=()=>{t(!1),w(!1),I("Instagram",{action:"logIn",username:h,password:E}).then(n=>{n.success&&n.account?(w(!1),t(!1),I("isAdmin").then(p=>{Q.APPS.INSTAGRAM.account.set(n.account),V({...n.account,isAdmin:p}),R("feed"),f(!0)})):n.error=="no account"?t(!0):n.error=="wrong password"?w(!0):console.log("Unknown error, please contact support with: Instagram LogIn.jsx onLogIn:43 [ALREADY LOGGED IN]",n==null?void 0:n.error)})},A=()=>{let n=h.toLowerCase().replace(/\s/g,"");n.length<3||n.length>15||I("Instagram",{action:"createAccount",name:l,username:n,password:E}).then(p=>{p.success?(w(!1),t(!1),I("isAdmin").then(G=>{let u={name:l,username:n,posts:0,followers:0,following:0};Q.APPS.INSTAGRAM.account.set(u),V({...u,isAdmin:G}),R("feed"),f(!0)})):console.log("couldn't create account",p)})};return a.useEffect(()=>{w(!1),t(!1)},[y]),e("div",{className:"log-in",children:s(B,{children:[e("div",{className:"wrapper",children:y==="login"?s(B,{children:[e("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/2560px-Instagram_logo.svg.png","data-theme":c.display.theme}),s("div",{className:"form",children:[e(Y,{placeholder:r("APPS.INSTAGRAM.USERNAME_PLACEHOLDER"),type:"text",className:"username",onChange:n=>T(n.target.value.replace(/\s/g,"")),maxLength:15}),S&&e("div",{className:"instagram-wrong",children:r("APPS.INSTAGRAM.NO_ACCOUNT")}),e(Y,{placeholder:r("APPS.INSTAGRAM.PASSWORD_PLACEHOLDER"),type:"password",onChange:n=>m(n.target.value),maxLength:50}),d&&e("div",{className:"instagram-wrong",children:r("APPS.INSTAGRAM.WRONG_USERNAME_OR_PASSWORD")}),e("div",{className:"button",onClick:k,children:r("APPS.INSTAGRAM.LOG_IN")})]})]}):s(B,{children:[e("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/2560px-Instagram_logo.svg.png","data-theme":c.display.theme}),s("div",{className:"form",children:[e(Y,{placeholder:r("APPS.INSTAGRAM.NAME_PLACEHOLDER"),type:"text",onChange:n=>o(n.target.value),maxLength:20}),e(Y,{placeholder:r("APPS.INSTAGRAM.USERNAME_PLACEHOLDER"),type:"text",className:"username",onChange:n=>T(n.target.value.replace(/\s/g,"")),maxLength:15}),M&&e("div",{className:"instagram-wrong",children:r("APPS.INSTAGRAM.ACCOUNT_WITH_USERNAME")}),e(Y,{placeholder:r("APPS.INSTAGRAM.PASSWORD_PLACEHOLDER"),type:"password",onChange:n=>m(n.target.value),maxLength:50}),e("div",{className:"button",onClick:A,children:r("APPS.INSTAGRAM.CREATE_ACCOUNT")})]})]})}),e("div",{className:"footer",children:y==="login"?s(B,{children:[r("APPS.INSTAGRAM.NOT_HAVE_ACCOUNT")," ",e("span",{onClick:()=>P("createAccount"),children:r("APPS.INSTAGRAM.CREATE_ACCOUNT")})]}):s(B,{children:[r("APPS.INSTAGRAM.HAVE_ACCOUNT")," ",e("span",{onClick:()=>P("login"),children:r("APPS.INSTAGRAM.LOG_IN")})]})})]})})}function xe(){const{Func:i,View:N,GoBack:L,Post:c}=a.useContext($),[l,o]=N,[h,T]=L,[E,m]=c,[S,t]=a.useState(""),[d,w]=a.useState(""),[M,C]=a.useState([]);a.useState([]);const[g,R]=a.useState([]),[v,V]=a.useState(0),[F,f]=a.useState(!1),[y,P]=a.useState(!1);return a.useEffect(()=>{I("Instagram",{action:"getPosts",page:0}).then(A=>{A&&R(A)})},[]),a.useEffect(()=>{const A=setTimeout(()=>t(d),500);return()=>clearTimeout(A)},[d]),a.useEffect(()=>{S.length>0&&I("Instagram",{action:"search",query:S}).then(A=>{A&&C(A)})},[S]),s("div",{className:"search-container",children:[e("div",{className:"search-header",children:e(ve,{placeholder:"Search",onChange:A=>w(A.target.value)})}),e("div",{className:"search-body",onScroll:()=>{if(F||y||S.length>0)return;let A=document.querySelector("#last");if(!A)return;!K(A)&&(P(!0),I("Instagram",{action:"getPosts",page:v+1}).then(p=>{p&&p.length>0?(R([...g,...p]),P(!1)):f(!0)}),V(p=>p+1))},children:S.length>0?e("div",{className:"search-results",children:M.map(A=>s("div",{className:"item",onClick:()=>{i.fetchAndSetProfile(A.username)},children:[e("div",{className:"profile-picture",children:e("img",{src:i.getAvatar(A.avatar),alt:"profile"})}),s("div",{className:"user",children:[s("div",{className:"username",children:[A.username,A.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),e("div",{className:"name",children:A.name})]})]}))}):e("div",{className:"feed-grid",children:g.map((A,n)=>{let G=Math.floor(n/3)%2==0,u=!1;u=n%3==(G?1:0),g[n+1]||(u=!1);let b=JSON.parse(A.media)[0],O=n==g.length-1?"last":"";return e("div",{id:O,className:`grid-post${u?" big":""}`,onClick:()=>{T({cb:()=>{o("search"),T(null)}}),m(A),o("post")},children:q(b)?e("video",{src:b,autoPlay:!0,loop:!0,muted:!0}):e("img",{src:b,alt:"post"})},n)})})})]})}function We(){const[i,N]=a.useState([]),[L,c]=a.useState(0),[l,o]=a.useState(!1),[h,T]=a.useState(!1);a.useEffect(()=>{I("Instagram",{action:"getNotifications"}).then(m=>{m&&N(m)})},[]);const E=()=>{if(l||h)return;let m=document.querySelector("#last");if(!m)return;!K(m)&&(T(!0),I("Instagram",{action:"getNotifications",page:L+1}).then(t=>{t&&t.length>0?(N([...i,...t]),T(!1)):o(!0)}),c(t=>t+1))};return s("div",{className:"notifications-container",children:[e("div",{className:"notifications-header",children:r("APPS.INSTAGRAM.ACTIVITY")}),e("div",{className:"notifications-body",onScroll:E,children:i.map((m,S)=>{let t=S===i.length-1?"last":"";return e(Be,{notification:m,last:t},S)})})]})}const ie=i=>{var l,o;const N=new Date(i),c=(new Date-N)/1e3;return c<1?"Now":c<60?`${Math.floor(c)}s`:c<3600?`${Math.floor(c/60)}m`:c<86400?Math.floor(c/3600)+"h":c<604800?Math.floor(c/86400)+"d":`${N.getDate()} ${N.toLocaleDateString(((o=(l=he)==null?void 0:l.value)==null?void 0:o.DateLocale)??"en-US",{month:"short"})}`},Be=({notification:i,last:N})=>{const{Account:L,Func:c}=a.useContext($),[l]=L,[o,h]=a.useState(i.isFollowing);switch(i.type){case"like_photo":return s("div",{className:"notification-item",id:N,onClick:()=>c.fetchAndSetPost(i.postId),children:[s("div",{className:"notification-body",children:[e("img",{className:"avatar",src:c.getAvatar(i.avatar),onClick:E=>{E.stopPropagation(),c.fetchAndSetProfile(i.username)}}),s("div",{className:"content",children:[e("span",{children:i.username})," ",r("APPS.INSTAGRAM.LIKED_PHOTO"),e("span",{className:"date",children:ie(i.timestamp)})]})]}),q(i.photo)?e("video",{className:"post-preview",src:i.photo,muted:!0,controls:!1}):e("img",{className:"post-preview",src:i.photo})]});case"like_comment":return e("div",{className:"notification-item",id:N,onClick:()=>c.fetchAndSetPost(i.postId,!0),children:s("div",{className:"notification-body",children:[e("img",{className:"avatar",src:c.getAvatar(i.avatar),onClick:E=>{E.stopPropagation(),c.fetchAndSetProfile(i.username)}}),s("div",{className:"content",children:[e("span",{children:i.username})," ",r("APPS.INSTAGRAM.LIKED_COMMENT").format({comment:i.comment}),e("span",{className:"date",children:ie(i.timestamp)})]})]})});case"comment":return s("div",{className:"notification-item",id:N,onClick:()=>c.fetchAndSetPost(i.postId,!0),children:[s("div",{className:"notification-body",children:[e("img",{className:"avatar",src:c.getAvatar(i.avatar),onClick:E=>{E.stopPropagation(),c.fetchAndSetProfile(i.username)}}),s("div",{className:"content",children:[e("span",{children:i.username})," ",r("APPS.INSTAGRAM.COMMENTED").format({comment:i.comment}),e("span",{className:"date",children:ie(i.timestamp)})]})]}),q(i.photo)?e("video",{className:"post-preview",src:i.photo,muted:!0,controls:!1}):e("img",{className:"post-preview",src:i.photo})]});case"follow":return s("div",{className:"notification-item",id:N,onClick:()=>c.fetchAndSetProfile(i.username),children:[s("div",{className:"notification-body",children:[e("img",{className:"avatar",src:c.getAvatar(i.avatar),onClick:()=>c.fetchAndSetProfile(i.username)}),s("div",{className:"content",children:[e("span",{children:i.username})," ",r("APPS.INSTAGRAM.FOLLOWED"),e("span",{className:"date",children:ie(i.timestamp)})]})]}),e("div",{className:`button ${o?"following":"follow"}`,onClick:E=>{E.stopPropagation(),l.username!==i.username&&(o?H.PopUp.set({title:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.TITLE"),description:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.DESCRIPTION").format({username:i.username}),buttons:[{title:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.CANCEL")},{title:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.PROCEED"),color:"red",cb:()=>{I("Instagram",{action:"toggleFollow",data:{username:i.username,following:!o}}).then(m=>{h(S=>!S)})}}]}):I("Instagram",{action:"toggleFollow",data:{username:i.username,following:!o}}).then(m=>{h(S=>!S)}))},children:o?r("APPS.INSTAGRAM.FOLLOWING"):r("APPS.INSTAGRAM.FOLLOW")})]})}};function $e(i){const{View:N,GoBack:L,Comments:c,Account:l,Func:o}=a.useContext($),[h]=l,[T,E]=N,[m,S]=L,[t,d]=c,[w,M]=a.useState(""),C=a.useRef(null),[g,R]=a.useState(0),[v,V]=a.useState(!1),[F,f]=a.useState(!1),y=()=>{w.length!==0&&I("Instagram",{action:"postComment",data:{postId:t.post.id,comment:w}}).then(()=>{M(""),C.current.value="",d(k=>({post:k.post,comments:[{user:{username:h.username,avatar:h.avatar,verified:h.verified},comment:{content:w,timestamp:Date.now(),likes:0,liked:!1}},...k.comments]}))})},P=()=>{if(v||F)return;let k=document.querySelector("#last");if(!k)return;!K(k)&&(f(!0),I("Instagram",{action:"getComments",postId:t.post.id,page:g+1}).then(n=>{n&&n.length>0?(d({...t,comments:[...t.comments,...n]}),f(!1)):V(!0)}),R(n=>n+1))};return s("div",{className:"comments-container",children:[s("div",{className:"comments-header",children:[e(Ne,{onClick:()=>{m&&(m!=null&&m.cb)?m.cb():E("feed")}}),e("div",{className:"title",children:r("APPS.INSTAGRAM.COMMENTS")}),e("span",{})]}),s("div",{className:"comments-body",onScroll:P,children:[s("div",{className:"post-info",children:[e("div",{className:"profile-picture",children:e("img",{src:o.getAvatar(t.post.avatar),alt:"profile"})}),s("div",{className:"post-data",children:[s("div",{className:"caption",children:[s("span",{className:"username",children:[t.post.username,t.post.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),ae(t.post.caption)]}),e("div",{className:"actions",children:e("div",{className:"date",children:Ie(t.post.timestamp)})})]})]}),t.comments.map((k,A)=>{let n=A===t.comments.length-1;return e(He,{data:k,last:n},A)})]}),s("div",{className:"add-comment",children:[e("div",{className:"profile-picture",children:e("img",{src:o.getAvatar(h.avatar),alt:"profile"})}),s("div",{className:"input-container",children:[e(Y,{type:"text",ref:C,placeholder:r("APPS.INSTAGRAM.ADD_COMMENT_AS").format({name:h.username}),onKeyPress:k=>{k.key==="Enter"&&y()},onChange:k=>M(k.target.value)}),e("div",{className:"send",onClick:y,children:r("APPS.INSTAGRAM.POST")})]})]})]})}const He=({data:i,last:N})=>{const{Func:L}=a.useContext($),[c,l]=a.useState(i.comment.liked),[o,h]=a.useState(i.comment.likes);return s("div",{className:"comment",id:N&&"last",children:[s("div",{className:"user",children:[e("div",{className:"profile-picture",onClick:()=>L.fetchAndSetProfile(i.user.username),children:e("img",{src:L.getAvatar(i.user.avatar),alt:"profile"})}),s("div",{className:"comment-data",children:[s("div",{className:"caption",children:[s("span",{className:"username",onClick:()=>L.fetchAndSetProfile(i.user.username),children:[i.user.username,i.user.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),i.comment.content]}),s("div",{className:"actions",children:[e("div",{className:"date",children:Ie(i.comment.timestamp)}),s("div",{className:"likes",children:[o," ",r("APPS.INSTAGRAM.LIKES").toLowerCase()]})]})]})]}),e(Ae,{liked:c,onClick:()=>{i.comment.id&&I("Instagram",{action:"toggleLike",data:{postId:i.comment.id,toggle:!c,isComment:!0}}).then(T=>{T&&(l(T.liked),h(T.likes))})}})]})},Ie=i=>{const N=new Date(i),c=new Date-N,l=Math.floor(c/(1e3*60*60*24)),o=Math.floor(c/(1e3*60*60)),h=Math.floor(c/(1e3*60));let T="";return l<1?o<1?T=`${h}m`:T=`${o}h`:l<30?T=`${l}d`:T=`${N.getDate()}/${N.getMonth()+1}/${N.getFullYear()}`,T};function je(){const{View:i,Post:N,GoBack:L}=a.useContext($),[c,l]=i,[o]=L,[h]=N;return e(B,{children:h&&e("div",{className:"viewpost-container",children:s(B,{children:[s("div",{className:"viewpost-header",children:[e(Ne,{onClick:()=>{o&&(o.cb?o.cb():l(o.view))}}),e("div",{className:"name",children:h.username??"Unknown"}),e("span",{})]}),e("div",{className:"profile-body",children:e(pe,{data:h})})]})})})}function ze(){const{View:i}=a.useContext($),[N,L]=i,[c,l]=a.useState(0),[o,h]=a.useState([]),[T,E]=a.useState(""),[m,S]=a.useState([]),[t,d]=a.useState(0),[w,M]=a.useState(!1),[C,g]=a.useState(!1);a.useEffect(()=>{I("Camera",{action:"getImages",page:0,filter:{showVideos:!0,showPhotos:!0}}).then(v=>{v&&S(v)})},[]);const R=v=>{if(C||w)return;let V=document.querySelector("#last");if(!V)return;!K(V)&&(M(!0),I("Camera",{action:"getImages",page:t+1,filter:{showVideos:!0,showPhotos:!0}}).then(f=>{f&&f.length>0?(S([...m,...f]),M(!1)):g(!0)}),d(f=>f+1))};return s("div",{className:"newpost-container","data-camera":!1,children:[c===0&&s(B,{children:[s("div",{className:"newpost-header",children:[e("i",{className:"fal fa-times",onClick:()=>{L("feed")}}),e("div",{className:"title",children:r("APPS.INSTAGRAM.NEW_POST")}),e("div",{className:"next",onClick:()=>{o.length>0&&c==0&&l(1)},children:r("APPS.INSTAGRAM.NEXT")})]}),e("div",{className:"newpost-body",onScroll:R,children:e("div",{className:"images",children:m.map((v,V)=>{let F=V===m.length-1?"last":"";return s("div",{id:F,className:"image",onClick:()=>{o.includes(v.src)?h(o.filter(y=>y!==v.src)):o.length<5&&h([...o,v.src])},children:[q(v.src)?e(Ye,{src:v.src}):e("img",{src:v.src,alt:"image"}),e("div",{className:"select",children:e(_e,{checked:o.includes(v.src)})})]},V)})})})]}),c===1&&s(B,{children:[s("div",{className:"newpost-header",children:[e("i",{className:"fal fa-chevron-left",onClick:()=>{l(0)}}),e("div",{className:"title",children:r("APPS.INSTAGRAM.NEW_POST")}),e("div",{className:"next",onClick:()=>{I("Instagram",{action:"newPost",data:{caption:T,images:o}}).then(v=>{v&&L("feed")})},children:r("APPS.INSTAGRAM.POST")})]}),e("div",{className:"newpost-body",children:s("div",{className:"caption",children:[e("div",{className:"image",children:q(o[0])?e("video",{src:o[0],muted:!0}):e("img",{src:o[0],alt:"image"})}),e(ge,{onChange:v=>{E(v.target.value)},placeholder:r("APPS.INSTAGRAM.CAPTION_PLACEHOLDER")})]})})]})]})}const Ye=({src:i})=>{const[N,L]=a.useState(null);return s(B,{children:[e("video",{src:i,crossOrigin:"anonymous",controls:!1,onMouseOver:l=>l.currentTarget.play(),onMouseOut:l=>l.currentTarget.pause(),onLoadedMetadata:l=>L(l.currentTarget.duration)}),N&&e("div",{className:"video-duration",children:(l=>{const o=Math.floor(l/60),h=Me(l-o*60,0);return`${o}:${h<10?"0"+h:h}`})(N)})]})};function qe(){const{View:i,Func:N,Dm:L,Account:c,GoBack:l}=a.useContext($),[o,h]=i,[T]=c,[E,m]=L,[S,t]=l,[d,w]=a.useState(!1),[M,C]=a.useState(""),[g,R]=a.useState(""),[v,V]=a.useState([]);a.useState([]);const[F,f]=a.useState([]),[y,P]=a.useState(0),[k,A]=a.useState(!1),[n,p]=a.useState(!1);a.useEffect(()=>{I("Instagram",{action:"getRecentMessages",page:0}).then(u=>{u&&f(u)})},[]);const G=()=>{if(k||n)return;let u=document.querySelector("#last");if(!u)return;!K(u)&&(p(!0),I("Instagram",{action:"getRecentMessages",page:y+1}).then(O=>{O&&O.length>0?(f([...F,...O]),p(!1)):A(!0)}),P(O=>O+1))};return a.useEffect(()=>{const u=setTimeout(()=>C(g),500);return()=>clearTimeout(u)},[g]),a.useEffect(()=>{M.length>0?d?I("Instagram",{action:"search",query:M}).then(u=>{u&&V(u)}):V(F.filter(u=>u.username.includes(M)||u.name.includes(M)&&u.username!==T.username)):V([])},[M]),a.useEffect(()=>{C(""),V([])},[d]),e("div",{className:"dm-list",children:d?s("div",{className:"slide up",children:[s("div",{className:"dm-list-header new",children:[e("i",{className:"far fa-chevron-left",onClick:()=>{w(!1),V([])}}),e("div",{className:"title",children:r("APPS.INSTAGRAM.NEW_MESSAGE")}),e("span",{})]}),s("div",{className:"dm-list-body ",children:[s("div",{className:"input",children:[e("span",{children:r("APPS.INSTAGRAM.TO")}),e(Y,{type:"text",onChange:u=>R(u.target.value),placeholder:"Search"})]}),v.length>0&&e("div",{className:"items",children:v.map((u,b)=>s("div",{className:"item",onClick:()=>{w(!1),m(u),h("dm")},children:[e("div",{className:"avatar",onClick:O=>{O.stopPropagation(),t({cb:()=>{h("dmList"),t(null)}}),N.fetchAndSetProfile(u.username)},children:e("img",{src:N.getAvatar(u.avatar)})}),s("div",{className:"info",children:[s("div",{className:"username",children:[u.username,u.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),e("div",{className:"last-message",children:u.name})]})]},b))})]})]}):s(B,{children:[s("div",{className:"dm-list-header",children:[s("div",{className:"top",children:[e("i",{className:"far fa-chevron-left",onClick:()=>h("feed")}),e("i",{className:"far fa-edit",onClick:()=>w(!0)})]}),e(ve,{placeholder:r("SEARCH"),onChange:u=>R(u.target.value)})]}),e("div",{className:"dm-list-body",onScroll:G,children:e("div",{className:"items",children:M.length&&!d>0?v.map((u,b)=>{var O;return((O=u.content)==null?void 0:O.length)===0&&(u.content=r("APPS.INSTAGRAM.SENT_A_PHOTO")),s("div",{className:"item",onClick:()=>{w(!1),m(u),h("dm")},children:[e("div",{className:"avatar",onClick:D=>{D.stopPropagation(),t({cb:()=>{h("dmList"),t(null)}}),N.fetchAndSetProfile(u.username)},children:e("img",{src:N.getAvatar(u.avatar)})}),s("div",{className:"info",children:[s("div",{className:"username",children:[u.name,u.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),s("div",{className:"last-message",children:[u.content.length>40?u.content.substring(0,40)+"...":u.content," • ",ce(u.timestamp)]})]})]},b)}):F.map((u,b)=>{let O=b===F.length-1;return u.content.length===0&&(u.content=r("APPS.INSTAGRAM.SENT_A_PHOTO")),s("div",{className:"item",id:O?"last":"",onClick:()=>{w(!1),m(u),h("dm")},children:[e("div",{className:"avatar",onClick:D=>{D.stopPropagation(),t({cb:()=>{h("dmList"),t(null)}}),N.fetchAndSetProfile(u.username)},children:e("img",{src:N.getAvatar(u.avatar)})}),s("div",{className:"info",children:[s("div",{className:"username",children:[u.name,u.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),u.content.length>40?u.content.substring(0,40)+"...":u.content," • ",ce(u.timestamp)]})]},b)})})})]})})}function Ke(){const{Func:i,Account:N,Dm:L,View:c,GoBack:l}=a.useContext($),o=ee(te.Settings),[h]=N,[T,E]=c,[m,S]=L,[t,d]=l,[w,M]=a.useState([]),C=a.useRef(null),[g,R]=a.useState({content:"",attachments:[]}),[v,V]=a.useState(0),[F,f]=a.useState(!1),[y,P]=a.useState(!1);a.useEffect(()=>{f(!1),P(!1),V(0),M([]),I("Instagram",{action:"getMessages",page:0,username:m.username}).then(n=>{n&&M(n.reverse())})},[]),z("instagram:newMessage",n=>{if(m.username!==n.sender)return;M([...w,n]);let p=document.querySelector(".dm-body-container");p.scrollTop=p.scrollHeight});const k=()=>{g.content.length===0&&g.attachments.length===0||I("Instagram",{action:"sendMessage",username:m.username,message:{content:g.content,attachments:g.attachments.length>0?g.attachments:null}}).then(n=>{if(!n)return;C.current.value="",M([...w,{sender:h.username,recipient:m.username,content:g.content,attachments:g.attachments,timestamp:new Date}]),R({content:"",attachments:[]});let p=document.querySelector(".dm-body-container");p.scrollTop=p.scrollHeight})},A=()=>{if(F||y)return;let n=document.querySelector("#last");if(!n)return;!K(n)&&(P(!0),I("Instagram",{action:"getMessages",page:v+1,username:m.username}).then(G=>{G&&G.length>0?(M([...G.reverse(),...w]),P(!1)):f(!0)}),V(G=>G+1))};return s("div",{className:"dm-container",children:[s("div",{className:"dm-header",children:[e("i",{className:"far fa-chevron-left",onClick:()=>{t&&t.cb?(t.cb(),d(null)):E("dmList")}}),s("div",{className:"profile",onClick:n=>{n.stopPropagation(),d({cb:()=>{S(m),E("dm")}}),i.fetchAndSetProfile(m.username)},children:[e("div",{className:"avatar",children:e("img",{src:i.getAvatar(m.avatar)})}),s("div",{className:"username",children:[m.name??m.username,m.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]})]})]}),e("div",{className:"dm-body-container",onScroll:A,children:e("div",{className:"dm-body",children:w.map((n,p)=>{var D;let G,u=p===0,b=n.sender===h.username?"self":"other",O=((D=w[p+1])==null?void 0:D.sender)===h.username?"self":"other";return w[p+1]?G=Math.abs(n.timestamp-w[p+1].timestamp)/36e5:O=void 0,s("div",{className:`message ${b}`,id:u?"last":"",children:[b=="other"?s("div",{className:"message-with-pfp",children:[e("div",{className:`profile-picture ${b!==O?"show":"hide"}`,onClick:W=>{W.stopPropagation(),d({cb:()=>{S(m),E("dm")}}),i.fetchAndSetProfile(m.username)},children:e("img",{src:i.getAvatar(m.avatar)})}),s("div",{className:"message-content",children:[n.content&&e("div",{className:"content",children:ae(n.content)}),n.attachments&&e("div",{className:"attatchments",children:n.attachments.map((W,_)=>q(W)?e("video",{src:W,controls:!1,loop:!0,autoPlay:!0,muted:!0,onClick:U=>{H.FullscreenImage.set({display:!0,image:W})}},_):e(de,{src:W,onClick:()=>{H.FullscreenImage.set({display:!0,image:W})}},_))})]})]}):s(B,{children:[n.content&&e("div",{className:"content",children:ae(n.content)}),n.attachments&&e("div",{className:"attatchments",children:n.attachments.map((W,_)=>q(W)?e("video",{src:W,controls:!1,loop:!0,muted:!0,autoPlay:!0,onClick:U=>{H.FullscreenImage.set({display:!0,image:W})}},_):e("img",{src:W,onClick:()=>{H.FullscreenImage.set({display:!0,image:W})}},_))})]}),w[p+1]&&G>6?e("div",{className:"date",children:me(n.timestamp,o.time.twelveHourClock)}):b!==O&&e("div",{className:"date",children:me(n.timestamp,o.time.twelveHourClock)})]},p)})})}),e("div",{className:"attachments",children:g.attachments.map((n,p)=>s("div",{className:"attachment",children:[q(n)?e("video",{src:n,muted:!0,controls:!1,loop:!0,autoPlay:!0}):e(de,{src:n}),e(le,{onClick:()=>{R({...g,attachments:g.attachments.filter((G,u)=>u!==p)})}})]},p))}),s("div",{className:"dm-footer",children:[e(Y,{type:"text",ref:C,onChange:n=>{R({...g,content:n.target.value})},onKeyDown:n=>{n.key==="Enter"&&k()},placeholder:r("APPS.INSTAGRAM.MESSAGE_PLACEHOLDER")}),g.content.length>0?e("span",{onClick:()=>k(),className:"send",children:r("APPS.INSTAGRAM.SEND")}):e(Re,{onClick:()=>{g.attachments.length<3&&H.Gallery.set({includeVideos:!0,onSelect:n=>R({...g,attachments:[...g.attachments,n.src]})})}})]})]})}function Xe(){var p,G,u,b;const{Account:i,View:N,Func:L,Stories:c,Story:l,Dm:o}=a.useContext($),[h]=i,[T,E]=N,[m,S]=c,[t,d]=l,[w,M]=o,[C,g]=a.useState(0),[R,v]=a.useState(""),[V,F]=a.useState(!1),[f,y]=a.useState({x:0,y:0});a.useEffect(()=>{if(t){y(t.origin);for(let O=0;O<t.media.length;O++)if(!t.media[O].seen)return g(O)}},[]);const P=O=>{if(V)return F(!1);const D=O.target.getBoundingClientRect(),W=O.clientX-D.left;let _=t.media[C];if(_.seen||I("Instagram",{action:"viewedStory",id:_.id}),W<D.width/2)if(C>0)g(C-1);else{let U=m.findIndex(J=>J.username===t.username),j=m[U-1];j&&L.fetchAndSetStory(j)}else if(C<t.media.length-1)g(C+1);else{let U=m.findIndex(J=>J.username===t.username),j=m[U+1];j?(A(t.username),L.fetchAndSetStory(j),g(0)):n()}},k=()=>{!R||R===""||I("Instagram",{action:"sendMessage",username:t.username,message:{content:R}}).then(O=>{O&&(M({username:t.username,name:t.name,verified:t.verified,avatar:t.avatar}),E("dm"),n())})},A=O=>{t.media.length===C+1&&S(D=>D.map(W=>(W.username===O&&(W.seen=1),W)))},n=()=>{A(t.username),d(null)};return s(Se.div,{className:"instagram-story",initial:{scale:0,transformOrigin:t!=null&&t.origin?`${((p=t==null?void 0:t.origin)==null?void 0:p.x)??0}px ${((G=t==null?void 0:t.origin)==null?void 0:G.y)??0}px`:"50% 50%"},animate:{scale:1,transformOrigin:t!=null&&t.origin?`${((u=t==null?void 0:t.origin)==null?void 0:u.x)??0}px ${((b=t==null?void 0:t.origin)==null?void 0:b.y)??0}px`:"50% 50%"},exit:{scale:0,transformOrigin:f?`${(f==null?void 0:f.x)??0}px ${(f==null?void 0:f.y)??0}px`:"50% 50%"},transition:{duration:.25,ease:"easeInOut"},children:[q(t==null?void 0:t.media[C].image)?e("video",{className:"background-image",onClick:P,autoPlay:!0,loop:!0,src:t==null?void 0:t.media[C].image}):e("div",{className:"background-image",onClick:P,style:{backgroundImage:`url(${t==null?void 0:t.media[C].image})`}}),e(Pe,{children:V&&e(Je,{activeImage:C,close:()=>F(!1)})}),s("div",{className:"story-wrapper",children:[s("div",{className:"story-header",children:[e("div",{className:"story-steps",children:t==null?void 0:t.media.map((O,D)=>e("div",{className:C===D?"active":"",onClick:()=>g(D)},D))}),s("div",{className:"profile-details",children:[s("div",{className:"profile",onClick:()=>L.fetchAndSetProfile(t.username),children:[e("div",{className:"profile-picture",style:{backgroundImage:`url(${L.getAvatar(t==null?void 0:t.avatar)})`}}),s("div",{className:"name",children:[t==null?void 0:t.username,!1]}),e("div",{className:"time",children:ce(t==null?void 0:t.media[C].timestamp)})]}),e("div",{className:"stats",children:e(le,{onClick:()=>{if(t!=null&&t.media[C].seen)return n();I("Instagram",{action:"viewedStory",id:t==null?void 0:t.media[C].id}).then(O=>n())}})})]})]}),(t==null?void 0:t.username)===h.username?e("div",{className:"story-footer","data-stats":!0,children:s("div",{className:"seen-by",onClick:()=>F(!0),children:[(t==null?void 0:t.media[C].viewers)&&e("div",{className:"images",children:t==null?void 0:t.media[C].viewers.map((O,D)=>e("img",{src:L.getAvatar(O.avatar)},D))}),r("APPS.INSTAGRAM.SEEN_BY").format({count:Oe(t==null?void 0:t.media[C].views)??0})]})}):s("div",{className:"story-footer",children:[e("div",{className:"input",children:e(Y,{type:"text",placeholder:r("APPS.INSTAGRAM.SEND_A_MESSAGE"),onChange:O=>v(O.target.value),onKeyDown:O=>{O.key==="Enter"&&k()}})}),e(ye,{onClick:()=>k()})]})]})]})}const Je=i=>{var M;const{Func:N,Story:L}=a.useContext($),[c,l]=L,[o,h]=a.useState([]),[T,E]=a.useState(0),[m,S]=a.useState(!1),[t,d]=a.useState(!1);a.useEffect(()=>{(i==null?void 0:i.activeImage)!==void 0&&I("Instagram",{action:"getViewers",id:c==null?void 0:c.media[i.activeImage].id,page:0}).then(C=>{C&&(h(C),C.length<15&&S(!0))})},[]);const w=C=>{if(m||t)return;let g=document.querySelector("#last");if(!g)return;!K(g)&&(d(!0),I("Instagram",{action:"getViewers",id:c==null?void 0:c.media[i.activeImage].id,page:T+1}).then(v=>{v&&v.length>0?(h(V=>[...V,...v]),d(!1),v.length<15&&S(!0)):S(!0)}),E(v=>v+1))};return s(Se.div,{className:"story-modal",initial:{y:600},animate:{y:0},exit:{y:600},transition:{duration:.35,ease:"easeInOut"},children:[s("div",{className:"story-modal-header",children:[s("div",{className:"views",children:[e(Ge,{})," ",e("div",{className:"views",children:((M=c==null?void 0:c.media[i==null?void 0:i.activeImage])==null?void 0:M.views)??0})]}),e(le,{className:"close",onClick:i==null?void 0:i.close})]}),s("div",{className:"story-modal-content",children:[e("div",{className:"title",children:r("APPS.INSTAGRAM.STORY_VIEWERS")}),e("div",{className:"viewers",onScroll:w,children:o.map((C,g)=>{let R=g===o.length-1?"last":"";return e("div",{className:"item",id:R,children:s("div",{className:"user",onClick:()=>{N.fetchAndSetProfile(C.username),l(null)},children:[e("div",{className:"profile-picture",children:e("img",{src:N.getAvatar(C.avatar)})}),s("div",{className:"user-details",children:[s("div",{className:"username",children:[C.username,C.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),e("div",{className:"name",children:C.name})]})]})},g)})})]})]})};function Qe(){var T;const{Func:i,View:N,Account:L}=a.useContext($),c=ee(te.Settings),[l,o]=N,[h]=L;return e("div",{className:"instagram-footer",children:s(B,{children:[e("svg",{color:"#262626",fill:"#262626",height:"24",viewBox:"0 0 24 24",width:"24",onClick:()=>o("feed"),children:e("g",{children:l=="feed"?e("path",{fill:c.display.theme=="dark"&&"#fafafa",d:"M22 23h-6.001a1 1 0 01-1-1v-5.455a2.997 2.997 0 10-5.993 0V22a1 1 0 01-1 1H2a1 1 0 01-1-1V11.543a1.002 1.002 0 01.31-.724l10-9.543a1.001 1.001 0 011.38 0l10 9.543a1.002 1.002 0 01.31.724V22a1 1 0 01-1 1z"}):e("path",{d:"M9.005 16.545a2.997 2.997 0 012.997-2.997h0A2.997 2.997 0 0115 16.545V22h7V11.543L12 2 2 11.543V22h7.005z",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})})}),e("svg",{color:"#262626",fill:"#262626",height:"24",viewBox:"0 0 24 24",width:"24",onClick:()=>o("search"),children:l=="search"?e("path",{fill:c.display.theme=="dark"&&"#fafafa",d:"M13.173 13.164l1.491-3.829-3.83 1.49zM12.001.5a11.5 11.5 0 1011.5 11.5A11.513 11.513 0 0012.001.5zm5.35 7.443l-2.478 6.369a1 1 0 01-.57.569l-6.36 2.47a1 1 0 01-1.294-1.294l2.48-6.369a1 1 0 01.57-.569l6.359-2.47a1 1 0 011.294 1.294z"}):s(B,{children:[e("polygon",{fill:"none",points:"13.941 13.953 7.581 16.424 10.06 10.056 16.42 7.585 13.941 13.953",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),e("polygon",{fillRule:"evenodd",points:"10.06 10.056 13.949 13.945 7.581 16.424 10.06 10.056"}),e("circle",{cx:"12.001",cy:"12.005",fill:"none",r:"10.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]})}),e("svg",{color:"#262626",fill:"#262626",height:"24",viewBox:"0 0 24 24",width:"24",onClick:()=>o("newPost"),children:s(B,{children:[e("path",{d:"M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),e("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"6.545",x2:"17.455",y1:"12.001",y2:"12.001"}),e("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",x1:"12.003",x2:"12.003",y1:"6.545",y2:"17.455"})]})}),l==="notifications"?e("svg",{fill:"#262626",height:"24",viewBox:"0 0 48 48",width:"24",children:e("path",{fill:c.display.theme=="dark"&&"#fafafa",d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}):e("svg",{color:((T=c==null?void 0:c.display)==null?void 0:T.theme)==="dark"?"#ffffff":"#262626",fill:c.display.theme==="dark"?"#ffffff":"#262626",height:"24",viewBox:"0 0 24 24",width:"24",onClick:()=>o("notifications"),children:e("path",{color:c.display.theme=="dark"&&"#fafafa",d:"M16.792 3.904A4.989 4.989 0 0121.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 014.708-5.218 4.21 4.21 0 013.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 013.679-1.938m0-2a6.04 6.04 0 00-4.797 2.127 6.052 6.052 0 00-4.787-2.127A6.985 6.985 0 00.5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 003.518 3.018 2 2 0 002.174 0 45.263 45.263 0 003.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 00-6.708-7.218z"})}),e("img",{src:i.getAvatar(h.avatar),className:"profile",alt:"profile",onClick:()=>i.fetchAndSetProfile(h.username)})]})})}function Ze(i){const{Account:N,UserPanel:L,GoBack:c}=a.useContext($),[l,o]=L,[h,T]=a.useState([]),[E,m]=a.useState(0),[S,t]=a.useState(!1),[d,w]=a.useState(!1);let M={Following:"getFollowing",Followers:"getFollowers","Liked by":"getLikes"};a.useEffect(()=>{I("Instagram",{action:M[l.data.title],data:{postId:l.data.postId,username:l.data.username,page:0}}).then(g=>{g&&T(g)})},[]);const C=g=>{if(S||d)return;!K(document.querySelector("#last"))&&(w(!0),I("Instagram",{action:M[l.data.title],data:{postId:l.data.postId,username:l.data.username,page:E+1}}).then(v=>{v&&v.length>0?(T([...h,...v]),w(!1)):t(!0)}),m(v=>v+1))};return e(B,{children:l.data&&h&&s("div",{className:"userpanel-container",children:[s("div",{className:"userpanel-header",children:[e("i",{className:"far fa-chevron-left",onClick:()=>{var g;(g=l.data)==null||g.cb()}}),e("div",{className:"userpanel-title",children:l.data.title}),e("span",{})]}),e("div",{className:"userpanel-body",onScroll:C,children:e("div",{className:"items",children:h.map((g,R)=>{let v=R===h.length-1;return e(et,{data:g,allData:l.data,last:v},R)})})})]})})}const et=i=>{const{Func:N,Account:L,GoBack:c,UserPanel:l}=a.useContext($),[o]=L,[h,T]=c,[E,m]=l;let S=i.data,t=i.last;const[d,w]=a.useState(S.isFollowing===1);return s("div",{className:"item",id:t?"last":"",onClick:()=>{T({cb:()=>{m({display:!0,data:i.allData})}}),N.fetchAndSetProfile(S.username)},children:[s("div",{className:"user",children:[e("div",{className:"profile-picture",children:e("img",{src:N.getAvatar(S.avatar),alt:"profile"})}),s("div",{className:"user-details",children:[s("div",{className:"username",children:[S.username,S.verified&&e("span",{className:"verified",children:e("img",{src:"./assets/img/icons/instagram/Verified.svg"})})]}),e("div",{className:"name",children:S.name})]})]}),o.username!==S.username&&e("div",{className:"action",onClick:M=>{M.stopPropagation(),S.username!==o.username&&(d?H.PopUp.set({title:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.TITLE"),description:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.DESCRIPTION").format({name:S.username}),buttons:[{title:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.CANCEL")},{title:r("APPS.INSTAGRAM.UNFOLLOW_POPUP.PROCEED"),color:"red",cb:()=>{I("Instagram",{action:"toggleFollow",data:{username:S.username,following:!d}}).then(C=>{w(g=>!g)})}}]}):I("Instagram",{action:"toggleFollow",data:{username:S.username,following:!d}}).then(C=>{w(g=>!g)}))},children:d?e("div",{className:"button following",children:r("APPS.INSTAGRAM.FOLLOWING")}):e("div",{className:"button follow",children:r("APPS.INSTAGRAM.FOLLOW")})})]})},$=a.createContext(null);function it(){const{Func:i}=a.useContext(Ve),N=ee(te.Settings),[L,c]=i.TextColor,[l,o]=a.useState("feed"),[h,T]=a.useState({}),[E,m]=a.useState(!1),[S,t]=a.useState(null),[d,w]=a.useState(null),[M,C]=a.useState(null),[g,R]=a.useState(null),[v,V]=a.useState([]),[F,f]=a.useState(null),[y,P]=a.useState(null),[k,A]=a.useState({display:!1,data:{}}),[n,p]=a.useState(!0);a.useEffect(()=>{I("isAdmin").then(_=>{if(Q.APPS.INSTAGRAM.account.value){T({...Q.APPS.INSTAGRAM.account.value,isAdmin:_}),m(!0),p(!1);return}else if(Q.APPS.INSTAGRAM.account.value===!1)return p(!1);I("Instagram",{action:"isLoggedIn"}).then(U=>{U?(Q.APPS.INSTAGRAM.account.set(U),T({...U,isAdmin:_}),m(!0),p(!1)):(Q.APPS.INSTAGRAM.account.set(!1),p(!1))})})},[]),a.useEffect(()=>{setTimeout(()=>{l==="live"||l==="newPost"||l==="story"?(c("#fafafaed"),l=="live"&&H.IndicatorVisible.set(!1)):(c(N.display.theme==="dark"?"#fafafaed":"#000000"),H.IndicatorVisible.set(!0)),l==="dm"?se.ReceiveAppNotifications.set(!1):se.ReceiveAppNotifications.set(!0)},250)},[l]);const G=(_,U)=>{_&&I("Instagram",{action:"getPost",id:_}).then(j=>{if(j){if(U)return b(j);f(j),o("post")}})},u=_=>{_&&I("Instagram",{action:"getProfile",username:_}).then(U=>{U&&(w(U),o("profile"))})},b=_=>{_.id&&I("Instagram",{action:"getComments",postId:_.id,page:0}).then(U=>{U&&(R({post:_,comments:U}),o("comments"))})},O=(_,U,j)=>{!_&&!(_!=null&&_.username)||((U==null?void 0:U.length)==0&&(U=void 0),I("Instagram",{action:"getStory",username:_.username}).then(J=>{J&&t({username:_.username,avatar:_.avatar,verified:_.verified,media:J,queue:U,origin:j})}))},D=_=>_||"./assets/img/icons/instagram/unknown-pfp.jpg",W={feed:e(Fe,{}),search:e(xe,{}),notifications:e(We,{}),profile:e(Ue,{data:d}),live:e(De,{}),logIn:e(ue,{}),comments:e($e,{}),post:e(je,{}),newPost:e(ze,{}),userpanel:e(Ze,{}),dmList:e(qe,{}),dm:e(Ke,{})};return a.useEffect(()=>{k.display&&o("userpanel")},[k]),e("div",{className:"instagram-container",children:e($.Provider,{value:{View:[l,o],Account:[h,T],Profile:[d,w],Post:[F,f],Comments:[g,R],LoggedIn:[E,m],GoBack:[y,P],UserPanel:[k,A],Dm:[M,C],Stories:[v,V],Story:[S,t],Func:{fetchAndSetProfile:u,fetchAndSetStory:O,fetchAndSetComments:b,fetchAndSetPost:G,getAvatar:D}},children:n||N.airplaneMode?e("div",{className:"loading",children:e(be,{size:55,speed:.9,color:L})}):e("div",{className:"instagram-wrapper",children:E?s(B,{children:[e(Pe,{children:S&&e(Xe,{})}),W[l],l!=="live"&&l!=="logIn"&&l!=="newPost"&&l!=="comments"&&!S&&e(Qe,{})]}):e(ue,{})})})})}export{$ as InstagramContext,it as default};
