import{r as n,a as t,j as i,F as O}from"./jsx-runtime-bb820e81.js";import{u as H,f as P,L as e,b3 as v,bc as h,M as u,C as d,b8 as A,aj as M,bd as S,be as C,S as f}from"./Phone-a7ab6193.js";const k=n.createContext(null);function T(){const[r,l]=n.useState([]),o=H(f.Unlocked),[s,a]=n.useState(null),[m,E]=n.useState(1);return n.useEffect(()=>{E(Math.floor(Math.random()*5)+1)},[o]),n.useEffect(()=>{P("Home",{action:"getHomes"}).then(c=>{c&&l(c)})},[]),t("div",{className:"home-container",style:{backgroundImage:`url(./assets/img/backgrounds/default/apps/home/${m}.png)`},children:[i("div",{className:"blur-overlay"}),i("div",{className:"home-header",children:s?t(O,{children:[i("div",{className:"title",children:e("APPS.HOME.MY_HOME")}),i(v,{className:"close",onClick:()=>a(!1)})]}):i(O,{children:t("div",{className:"title",children:[i(h,{})," ",e("APPS.HOME.MY_HOMES")]})})}),i("div",{className:"home-wrapper",children:s?i(_,{data:s}):i("div",{className:"items",children:r.map((c,N)=>t("div",{className:"item small",onClick:()=>a(c),children:[i("div",{className:"icon blue",children:i(h,{})}),t("div",{className:"info",children:[i("div",{className:"title",children:c.label}),t("div",{className:"value",children:["#",c.id]})]})]},N))})})]})}const _=({data:r})=>{const[l,o]=n.useState(r),s=n.useRef(null);return t(O,{children:[t("div",{className:"title",children:[e("APPS.HOME.ACTIONS"),i(u,{})]}),t("div",{className:"category",children:[t("div",{className:"item",onClick:()=>{d.PopUp.set({title:e("APPS.HOME.WAYPOINT_POPUP.TITLE"),description:e("APPS.HOME.WAYPOINT_POPUP.TEXT").format({home:l.label}),buttons:[{title:e("APPS.HOME.WAYPOINT_POPUP.CANCEL")},{title:e("APPS.HOME.WAYPOINT_POPUP.PROCEED"),cb:()=>{P("Home",{action:"setWaypoint",id:l.id})}}]})},children:[i("div",{className:"icon blue",children:i(A,{})}),t("div",{className:"info",children:[i("div",{className:"title",children:e("APPS.HOME.LOCATION")}),i("div",{className:"value",children:e("APPS.HOME.SET_WAYPOINT")})]})]}),l.locked!==void 0&&t("div",{className:`item ${l.locked?"active":""}`,onClick:()=>{d.PopUp.set({title:e("APPS.HOME.LOCK_POPUP.TITLE").format({toggle:l.locked?e("APPS.HOME.UNLOCK"):e("APPS.HOME.LOCK")}),description:e("APPS.HOME.LOCK_POPUP.TEXT").format({toggle:(l.locked?e("APPS.HOME.UNLOCK"):e("APPS.HOME.LOCK")).toLowerCase()}),buttons:[{title:e("APPS.HOME.LOCK_POPUP.CANCEL")},{title:e("APPS.HOME.LOCK_POPUP.PROCEED"),cb:()=>{P("Home",{action:"toggleLocked",id:l.id,uniqueId:l.uniqueId}).then(a=>{a!==void 0&&o({...l,locked:a})})}}]})},children:[i("div",{className:"icon blue",children:i(M,{})}),t("div",{className:"info",children:[i("div",{className:"title",children:e("APPS.HOME.FRONT_DOOR")}),i("div",{className:"value",children:l.locked?e("APPS.HOME.LOCKED"):e("APPS.HOME.UNLOCKED")})]})]}),t("div",{className:"item",onClick:()=>{d.PopUp.set({title:e("APPS.HOME.GIVE_KEY_POPUP.TITLE"),description:e("APPS.HOME.GIVE_KEY_POPUP.TEXT"),input:{placeholder:"0",type:"text",minCharacters:1,onChange:a=>s.current=a},buttons:[{title:e("APPS.HOME.GIVE_KEY_POPUP.CANCEL")},{title:e("APPS.HOME.GIVE_KEY_POPUP.PROCEED"),cb:()=>{s&&P("Home",{action:"addKeyholder",id:l.id,source:s.current}).then(a=>{a&&(s.current=null,o({...l,keyholders:a}))})}}]})},children:[i("div",{className:"icon yellow",children:i(S,{})}),t("div",{className:"info",children:[i("div",{className:"title",children:e("APPS.HOME.GIVE_KEY")}),i("div",{className:"value",children:e("APPS.HOME.MANAGE")})]})]})]}),t("div",{className:"title",children:[e("APPS.HOME.KEY_ACCESS"),i(u,{})]}),i("div",{className:"category scroll",children:l.keyholders.map((a,m)=>t("div",{className:"item small full",onClick:()=>{d.PopUp.set({title:e("APPS.HOME.REMOVE_KEY_POPUP.TITLE"),description:e("APPS.HOME.REMOVE_KEY_POPUP.TEXT").format({name:a.name}),buttons:[{title:e("APPS.HOME.REMOVE_KEY_POPUP.CANCEL")},{title:e("APPS.HOME.REMOVE_KEY_POPUP.PROCEED"),cb:()=>{P("Home",{action:"removeKeyholder",id:l.id,identifier:a.identifier}).then(E=>{E&&o({...l,keyholders:l.keyholders.filter(c=>c!==a)})})}}]})},children:[i("div",{className:"icon blue",children:i(C,{})}),t("div",{className:"info",children:[i("div",{className:"title",children:a.name}),i("div",{className:"value",children:e("APPS.HOME.MANAGE")})]})]},m))})]})};export{k as HomeContext,T as default};
